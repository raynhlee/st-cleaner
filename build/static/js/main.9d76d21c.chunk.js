(this.webpackJsonpstranger_things=this.webpackJsonpstranger_things||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(0),c=a.n(r),s=a(14),o=a.n(s),l=a(6),i=a.n(l),u=a(11),p=a(18),m=a(21),d="https://strangers-things.herokuapp.com",g="2301-FTB-PT-WEB-PT";function h(e,t){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/").concat(g,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:a}})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/").concat(g,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:a}})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/").concat(g,"/posts"));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a.data);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/").concat(g,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function x(e,t,a){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(i.a.mark((function e(t,a,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2301-FTB-PT-WEB-PT/posts/".concat(t,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({message:{content:"".concat(n)}})});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(e,t,a,n,r,c,s){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(i.a.mark((function e(t,a,n,r,c,s,o){var l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2301-FTB-PT-WEB-PT/posts/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({post:{title:"".concat(n),description:"".concat(r),price:"".concat(c),location:"".concat(s),willDeliver:"".concat(o)}})});case 3:return l=e.sent,e.next=6,l.json();case 6:return u=e.sent,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function S(e,t){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2301-FTB-PT-WEB-PT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var C=a(20),I=a.n(C),N=Object.freeze({title:"",description:"",price:"",location:"",deliver:!1}),L=function(e){var t=Object(r.useState)(N),a=Object(n.a)(t,2),s=a[0],o=a[1],l=e.loggedIn,d=e.userToken,g=e.setPosts,h=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value.trim();o(Object(m.a)(Object(m.a)({},s),{},Object(p.a)({},e.target.name,t)))};function f(){return(f=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j(d,s);case 4:I()("Success!");try{Promise.all([E()]).then((function(e){var t=Object(n.a)(e,1)[0];g(t.posts)}))}catch(a){console.log(a)}e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),I()("Failed to post, please try again");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return l&&c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Add New Post"),c.a.createElement("form",null,c.a.createElement("input",{type:"text",name:"title",placeholder:"Title",onChange:h}),c.a.createElement("input",{type:"text",name:"description",placeholder:"Description",onChange:h}),c.a.createElement("input",{type:"number",name:"price",placeholder:"Price",onChange:h}),c.a.createElement("input",{type:"text",name:"location",placeholder:"Location",onChange:h}),c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",name:"deliver",checked:s.deliver,onChange:h}),c.a.createElement("span",null,"Willing to Deliver?")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(e){return f.apply(this,arguments)}},"Submit"))))},M=a(12),D=a(24),U=a(129),B=a(130),W=a(132),_=a(133),A=Object(U.a)((function(e){return{root:{fontFamily:"Roboto, Helvetica, Arial, sans-serif",color:"white",fontSize:"20px",marginTop:"0",padding:"8px",display:"flex",justifyContent:"space-between",flexDirection:"row",fontWeight:"600",marginLeft:"10px"},linkColor:{color:"white",textDecoration:"none"}}}));function F(e){var t=e.setUsername,a=e.setPassword,n=e.loggedIn,r=e.setLoggedIn,s=Object(M.f)(),o=A();return c.a.createElement(B.a,{position:"absolute"},c.a.createElement(W.a,{className:o.root},"Stranger's Things",c.a.createElement(D.b,{className:o.linkColor,to:"/"},c.a.createElement(_.a,{color:"inherit"},"HOME")),n?c.a.createElement(D.b,{className:o.linkColor,to:"/profile"},c.a.createElement(_.a,{color:"inherit"},"Profile")):null,c.a.createElement(D.b,{className:o.linkColor,to:"/posts"},c.a.createElement(_.a,{color:"inherit"},"POSTS")),n?null:c.a.createElement(D.b,{className:o.linkColor,to:"/login"},c.a.createElement(_.a,{color:"inherit"},"LOGIN")),n?c.a.createElement(_.a,{color:"inherit",onClick:function(e){e.preventDefault(),localStorage.removeItem("Token"),localStorage.removeItem("Username"),r(!1),t(""),a(""),s.push("/login")}},"Logout"):null))}var R={position:"absolute",top:0,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",textAlign:"center",paddingLeft:"100px",paddingRight:"100px"},z=function(e){var t=e.username,a=e.loggedIn;return c.a.createElement("div",{style:R},c.a.createElement("div",null,c.a.createElement("h1",null,"Welcome to Stranger's things"),a?c.a.createElement("h2",null,"You are logged in as ",t):null))},J=function(e){var t=e.username,a=e.setUsername,n=e.password,r=e.setPassword,s=e.loggedIn,o=e.setUserToken,l=e.setLoggedIn,p=e.history,m=function(){var e=Object(u.a)(i.a.mark((function e(c){var s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,b(t,n);case 4:!1===(s=e.sent).success?(I()(s.error.message),a(""),r("")):(u=s.data.token,localStorage.setItem("Token",u),o(u),l(!0),a(t),localStorage.setItem("Username",t),p.push("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return s?c.a.createElement("div",null,"You are already logged in"):c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Login to your account"),c.a.createElement("form",{onSubmit:m},c.a.createElement("input",{type:"text",minLength:"6",placeholder:"Username",value:t,onChange:function(e){return a(e.target.value)},required:!0}),c.a.createElement("input",{type:"password",minLength:"6",placeholder:"Password",value:n,onChange:function(e){return r(e.target.value)},required:!0}),c.a.createElement("button",{type:"submit"},"Submit")),c.a.createElement("div",null,c.a.createElement("label",null,"Don't have an account? "),c.a.createElement(D.b,{to:"/register"},"Sign up Here")))},q=function(e){var t=e.username,a=e.setUsername,n=e.password,r=e.setPassword,s=e.setUserToken,o=e.setLoggedIn,l=e.loggedIn,p=e.history,m=function(){var e=Object(u.a)(i.a.mark((function e(c){var l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,h(t,n);case 4:!1===(l=e.sent).success?(I()(l.error.message),a(""),r("")):(u=l.data.token,localStorage.setItem("Token",u),localStorage.setItem("Username",t),a(t),s(u),o(!0),p.push("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return l?c.a.createElement("div",null,"You are already logged in"):c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Register your account"),c.a.createElement("form",{onSubmit:m},c.a.createElement("input",{type:"text",minLength:"6",placeholder:"Username",value:t,onChange:function(e){return a(e.target.value)},required:!0}),c.a.createElement("input",{type:"password",minLength:"6",placeholder:"Password",value:n,onChange:function(e){return r(e.target.value)},required:!0}),c.a.createElement("button",{type:"submit",className:"btn"},"Submit")),c.a.createElement("div",null,c.a.createElement("label",null,"Already have an account? "),c.a.createElement(D.b,{to:"/login"},"Sign in here.")))},H=function(e){var t=e.postProps,a=t.title,n=t.description,r=t.price,s=t.location,o=t.deliver;return c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Post"),c.a.createElement("form",null,c.a.createElement("label",null,"Title",c.a.createElement("input",{type:"text",name:"title",value:a,readOnly:!!a})),c.a.createElement("label",null,"Description",c.a.createElement("input",{type:"text",name:"description",value:n,readOnly:!!n})),c.a.createElement("label",null,"Price",c.a.createElement("input",{type:"text",name:"price",value:r,readOnly:!!r})),c.a.createElement("label",null,"Location",c.a.createElement("input",{type:"text",name:"location",value:s,readOnly:!!s})),c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",name:"deliver",checked:o,value:!!o,disabled:!!o}),c.a.createElement("span",null,"Willing to Deliver?"))))},Y=function(e){var t=e.message,a=e.setMessage,n=e.userToken,r=e.postId,s=function(){var e=Object(u.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,x(r,n,t);case 4:!0===e.sent.success?(a(""),I()("Message Sent")):I()("NOT sent, please try again"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Send Message"),c.a.createElement("form",{onSubmit:s},c.a.createElement("input",{type:"text",placeholder:"Type Your Message Here",value:t,onChange:function(e){return a(e.target.value)},required:!0}),c.a.createElement("button",{type:"submit",className:"btn"},"Submit")))},G=function(e){var t=e.postId,a=e.post,s=e.setPosts,o=e.loggedIn,l=e.userToken,p=Object(r.useState)(a.title),m=Object(n.a)(p,2),d=m[0],g=m[1],h=Object(r.useState)(a.description),f=Object(n.a)(h,2),b=f[0],v=f[1],y=Object(r.useState)(a.price),j=Object(n.a)(y,2),O=j[0],x=j[1],k=Object(r.useState)(a.location),T=Object(n.a)(k,2),P=T[0],C=T[1],N=Object(r.useState)(a.willDeliver),L=Object(n.a)(N,2),M=L[0],D=L[1];function U(){return(U=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,w(t,l,d,b,O,P,M);case 4:I()("Sucessfully Edited Post");try{Promise.all([E()]).then((function(e){var t=Object(n.a)(e,1)[0];s(t.posts)}))}catch(r){console.log(r)}e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),I()("Failed to Edit Post");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function B(){return(B=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,S(t,l);case 4:I()("Post successfully Deleted");try{Promise.all([E()]).then((function(e){var t=Object(n.a)(e,1)[0];s(t.posts)}))}catch(r){console.log(r)}e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),I()("Failed to Delete Post");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return o&&c.a.createElement("div",{className:"misc-style"},c.a.createElement("h2",null,"Edit Post"),c.a.createElement("form",null,c.a.createElement("lable",{style:{color:"#3f51b5",fontStyle:"bold",fontWeight:500}},"Title",c.a.createElement("input",{type:"text",name:"title",value:d,onChange:function(e){return g(e.target.value)}})),c.a.createElement("lable",{style:{color:"#3f51b5",fontStyle:"bold",fontWeight:500}},"Description",c.a.createElement("input",{type:"text",name:"description",value:b,onChange:function(e){return v(e.target.value)}})),c.a.createElement("lable",{style:{color:"#3f51b5",fontStyle:"bold",fontWeight:500}},"Price",c.a.createElement("input",{type:"text",name:"price",value:O,onChange:function(e){return x(e.target.value)}})),c.a.createElement("lable",{style:{color:"#3f51b5",fontStyle:"bold",fontWeight:500}},"Location",c.a.createElement("input",{type:"text",name:"location",value:P,onChange:function(e){return C(e.target.value)}})),c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",name:"deliver",value:M,onChange:function(e){return D(e.target.value.trim())}}),c.a.createElement("span",{style:{color:"#3f51b5",paddingLeft:"10px",fontWeight:"500"}},"Willing to Deliver?")),c.a.createElement("div",{style:{marginTop:"10px"}},c.a.createElement("button",{onClick:function(e){return U.apply(this,arguments)}},"Save"),c.a.createElement("span",{style:{marginLeft:"5px"}},c.a.createElement("button",{onClick:function(e){return B.apply(this,arguments)}},"Delete")))))},V=a(16),K=a(134),Q=a(142),X=a(74),Z=a.n(X),$=a(140),ee=Object(U.a)((function(e){return{appBar:{maxWidth:"75%",margin:"auto",display:"flex",paddingTop:"100px",justifyContent:"center",alignItems:"center"},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"75%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function te(e){var t=e.posts,a=e.setPosts,s=e.loggedIn,o=e.searchTerm,l=e.setSearchTerm,i=e.userToken,u=ee(),d=Object(r.useState)({top:!1}),g=Object(n.a)(d,2),h=g[0],f=g[1],b=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&f(Object(m.a)(Object(m.a)({},h),{},Object(p.a)({},e,t)))}};return c.a.createElement("div",{className:u.appBar},c.a.createElement(B.a,{position:"relative"},c.a.createElement(W.a,null,c.a.createElement(K.a,{className:u.title,variant:"h6",noWrap:!0},"POSTS"),c.a.createElement("div",{className:u.search},c.a.createElement("div",{className:u.searchIcon},c.a.createElement(Z.a,null)),c.a.createElement(Q.a,{placeholder:"Search\u2026",classes:{root:u.inputRoot,input:u.inputInput},inputProps:{"aria-label":"search"},value:o,onChange:function(e){return l(e.target.value)}})),s&&c.a.createElement(_.a,{onClick:b("top",!0),style:{color:"white"}},"Add Post"),c.a.createElement($.a,{anchor:"top",open:h.top,onClose:b("top",!1)},c.a.createElement(L,{loggedIn:s,userToken:i,setPosts:a,posts:t})))))}var ae=a(143),ne=a(135),re=a(144),ce=a(46),se=a.n(ce),oe=Object(U.a)((function(e){return{postsWrapper:{display:"flex"},root:{maxWidth:"75%",margin:"auto",justifyContent:"center",alignItems:"center"},icon:{verticalAlign:"bottom",height:20,width:20},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)},link:{textDecoration:"none","&:hover":{textDecoration:"underline"}}}})),le=function(e){var t=Object(r.useState)([]),a=Object(n.a)(t,2),s=a[0],o=a[1],l=Object(r.useState)(""),i=Object(n.a)(l,2),u=i[0],d=i[1],g=oe(),h=Object(r.useState)({top:!1}),f=Object(n.a)(h,2),b=f[0],v=f[1],y=Object(r.useState)({top:!1}),j=Object(n.a)(y,2),O=j[0],x=j[1],k=e.userToken,w=e.loggedIn,T=e.message,S=e.setMessage,P=e.username;Object(r.useEffect)((function(){try{Promise.all([E()]).then((function(e){var t=Object(n.a)(e,1)[0];o(t.posts)}))}catch(e){console.log(e)}}),[]);var C=function(e,t){return function(a){v(Object(m.a)(Object(m.a)({},b),{},Object(p.a)({},e,t)))}},I=function(e,t){return function(a){x(Object(m.a)(Object(m.a)({},O),{},Object(p.a)({},e,t)))}},N=s.filter((function(e){return function(e,t){var a=t.toLowerCase(),n=e.author.username.toLowerCase(),r=e.description.toLowerCase(),c=e.location.toLowerCase(),s=e.title.toLowerCase();return!!(n.includes(a)||r.includes(a)||c.includes(a)||s.includes(a))}(e,u)})),L=u?N:s;return c.a.createElement("div",null,c.a.createElement(te,{posts:s,setPosts:o,searchTerm:u,setSearchTerm:d,loggedIn:w,userToken:k}),c.a.createElement("div",{className:g.root},L.map((function(e,t){return c.a.createElement(ae.a,{key:t},c.a.createElement(re.a,{expandIcon:c.a.createElement(se.a,null)},c.a.createElement("div",null,e.title),c.a.createElement("div",null,e.description)),c.a.createElement(ne.a,null,"Price: ",e.price,c.a.createElement("br",null),"Delivery: ",e.willDeliver?"Available":"Not Available",c.a.createElement("br",null),"Location: ",e.location),w&&P!==e.author.username?c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{onClick:I(e._id,!0)},"Send Message"),c.a.createElement($.a,{anchor:"top",open:O[e._id],onClose:I(e._id,!1)},c.a.createElement(Y,{key:e._id,userToken:k,loggedIn:w,message:T,setMessage:S,postId:e._id}))):null,c.a.createElement(_.a,{onClick:C(e._id,!0)},"View Post"),c.a.createElement($.a,{anchor:"top",open:b[e._id],onClose:C(e._id,!1)},c.a.createElement("div",null,P===e.author.username?c.a.createElement(G,{postId:e._id,post:e,posts:s,setPosts:o,loggedIn:w,userToken:k}):c.a.createElement(H,{postId:e._id,post:e,setPosts:o,posts:s}))))}))))},ie=a(75),ue=a(141),pe=a(136),me=a(139),de=a(138),ge=a(137);function he(e){var t=e.children,a=e.value,n=e.index,r=Object(ie.a)(e,["children","value","index"]);return c.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n)},r),a===n&&c.a.createElement(me.a,{p:3},c.a.createElement(K.a,null,t)))}var fe=Object(U.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},items:{borderRadius:"10px",marginBottom:"10px",backgroundColor:"#e6ebff"},expandedPanel:{backgroundColor:e.palette.primary.main,color:"white !important"}}}));function be(e){var t=e.message,a=e.myMessages,s=e.setMessage,o=e.username,l=e.userToken,i=fe(),u=c.a.useState(0),d=Object(n.a)(u,2),g=d[0],h=d[1],f=Object(r.useState)({top:!1}),b=Object(n.a)(f,2),v=b[0],E=b[1],y=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&E(Object(m.a)(Object(m.a)({},v),{},Object(p.a)({},e,t)))}};return c.a.createElement("div",{className:i.root,style:{paddingTop:"100px",width:"75%",margin:"auto",justifyContent:"center",alignItems:"center"}},c.a.createElement(B.a,{position:"relative"},c.a.createElement(ue.a,{value:g,onChange:function(e,t){h(t)},"aria-label":"simple tabs example",indicatorColor:"primary"},c.a.createElement(pe.a,{label:"Messages from me"}),c.a.createElement(pe.a,{label:"Messages to me"}))),c.a.createElement(he,{value:g,index:0,className:""},a.map((function(e){return e.fromUser.username===o?c.a.createElement(ae.a,{key:e._id,className:i.items},c.a.createElement(re.a,{expandIcon:c.a.createElement(se.a,null),"aria-controls":"panel1c-content",id:"panel1c-header",classes:{expanded:i.expandedPanel}},c.a.createElement("div",null,c.a.createElement(K.a,{className:i.heading},c.a.createElement("strong",null,"Sent by me:")," ",e.fromUser.username))),c.a.createElement(ne.a,{className:i.details},c.a.createElement("div",{className:i.content},c.a.createElement("div",null,c.a.createElement(K.a,{variant:"content"},c.a.createElement("strong",null,"Message:")," ",e.content)),c.a.createElement("div",null,c.a.createElement(K.a,{variant:"caption"},c.a.createElement("strong",null,"Post:"),e.post.title)))),c.a.createElement(ge.a,null)):null}))),c.a.createElement(he,{value:g,index:1},a.map((function(e){return e.fromUser.username!==o?c.a.createElement(ae.a,{key:e._id,className:i.items},c.a.createElement(re.a,{expandIcon:c.a.createElement(se.a,null),"aria-controls":"panel1c-content",id:"panel1c-header"},c.a.createElement("div",null,c.a.createElement(K.a,{className:i.heading},c.a.createElement("strong",null,"From:")," ",e.fromUser.username))),c.a.createElement(ne.a,{className:i.details},c.a.createElement("div",{className:i.content},c.a.createElement("div",null,c.a.createElement(K.a,{variant:"content"},c.a.createElement("strong",null,"Message:")," ",e.content)),c.a.createElement("div",null,c.a.createElement(K.a,{variant:"caption"},c.a.createElement("strong",null,"Post:"),e.post.title)))),c.a.createElement(de.a,null,c.a.createElement(_.a,{size:"small",style:{color:"white"},onClick:y(e.post._id,!0)},"Send Message"),c.a.createElement($.a,{anchor:"top",open:v[e.post._id],onClose:y(e.post._id,!1)},c.a.createElement(Y,{key:e.post._id,userToken:l,message:t,setMessage:s,postId:e.post._id}))),c.a.createElement(ge.a,null)):null}))))}var ve=function(e){var t=e.message,a=e.setMessage,n=e.userToken,s=e.username,o=e.myMessages,l=e.setMyMessages,p=(e.myPosts,e.setMyPosts);return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2301-FTB-PT-WEB-PT/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,l(a.data.messages),p(a.data.posts),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),c.a.createElement("div",null,c.a.createElement(be,{myMessages:o,username:s,message:t,setMessage:a,userToken:n}))},Ee=function(){var e=localStorage.getItem("Token"),t=localStorage.getItem("Username"),a=Object(r.useState)(t||""),s=Object(n.a)(a,2),o=s[0],l=s[1],i=Object(r.useState)(""),u=Object(n.a)(i,2),p=u[0],m=u[1],d=Object(r.useState)(e||!1),g=Object(n.a)(d,2),h=g[0],f=g[1],b=Object(r.useState)(!!e),v=Object(n.a)(b,2),E=v[0],y=v[1],j=Object(r.useState)(""),O=Object(n.a)(j,2),x=O[0],k=O[1],w=Object(r.useState)([]),T=Object(n.a)(w,2),S=T[0],P=T[1],C=Object(r.useState)([]),I=Object(n.a)(C,2),N=I[0],L=I[1];return c.a.createElement("div",{className:"app"},c.a.createElement(D.a,null,c.a.createElement(F,{setUsername:l,setPassword:m,loggedIn:E,setLoggedIn:y}),c.a.createElement(M.c,null,c.a.createElement(M.a,{path:"/login",render:function(e){return c.a.createElement(J,Object.assign({},e,{username:o,setUsername:l,password:p,setPassword:m,userToken:h,setUserToken:f,loggedIn:E,setLoggedIn:y}))}}),c.a.createElement(M.a,{path:"/register",render:function(){return c.a.createElement(q,{username:o,setUsername:l,password:p,setPassword:m,userToken:h,setUserToken:f,loggedIn:E,setLoggedIn:y})}}),c.a.createElement(M.a,{path:"/profile",render:function(e){return c.a.createElement(ve,Object.assign({},e,{username:o,userToken:h,message:x,setMessage:k,myMessages:S,setMyMessages:P,myPosts:N,setMyPosts:L}))}}),c.a.createElement(M.a,{path:"/posts",render:function(){return c.a.createElement(le,{loggedIn:E,userToken:h,username:o,message:x,setMessage:k})}}),c.a.createElement(M.a,{path:"/",render:function(){return c.a.createElement(z,{username:o,loggedIn:E})}}))))};o.a.render(c.a.createElement(D.a,null,c.a.createElement(Ee,null)),document.getElementById("app"))},87:function(e,t,a){e.exports=a(100)}},[[87,1,2]]]);
//# sourceMappingURL=main.9d76d21c.chunk.js.map